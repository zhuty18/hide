proc是虚拟文件管理系统，是通过VFS接口层交互的。
在执行ps或ls命令时，proc文件系统会调用readdir函数依次遍历proc目录下的数字目录。
即，系统无论何时，但凡需要获取proc下的进程信息时，都会调用proc_pid_readdir函数来获取虚拟文件系统下的进程列表。
一种可行的实现方式是在task_struct下增加一个hide标记，在copy_process下初始化，在proc_pid_readdir下增加对应的过滤机制。

不过，这种方法的实现需要劫持系统调用，而我能查到的相关资料都是针对内核2.4-2.6，他们所利用的漏洞在5.4内核中已经被补上了。所以我没能实现。

不过在我最终版本的检测(all.py)中，我的遍历是从Linux初始进程起，遍历进程树，不调用proc_pid_readdir函数。而后和ps命令的输出比对，是可以检测出用这种方法隐藏的进程的。